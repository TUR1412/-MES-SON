# MESé¡¹ç›®å¼€å‘æŒ‡å—

> **æ›´æ–°æ—¶é—´ï¼š2025-06-05 09:40**  
> **é€‚ç”¨å¯¹è±¡ï¼šå…¨ä½“å›¢é˜Ÿæˆå‘˜**

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“¥ ç¯å¢ƒå‡†å¤‡

**å¿…éœ€å·¥å…·ï¼š**
- Visual Studio 2019/2022 æˆ– VS Code
- .NET Framework 4.8 SDK
- Git for Windows
- MySQL 8.0ï¼ˆå¯é€‰ï¼Œç”¨äºæ•°æ®åº“å¼€å‘ï¼‰

**è·å–ä»£ç ï¼š**
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/TUR1412/-MES-SON.git
cd MES-SON

# åˆ‡æ¢åˆ°å¼€å‘åˆ†æ”¯
git checkout develop

# éªŒè¯ç¼–è¯‘
dotnet build MES.sln

# è¿è¡Œç¨‹åº
src\MES.UI\bin\Debug\MES.UI.exe
```

### ğŸŒ¿ åˆ›å»ºåŠŸèƒ½åˆ†æ”¯

```bash
# Læˆå‘˜ï¼ˆç‰©æ–™ç®¡ç†ï¼‰
git checkout -b feature/L-material-management
git push -u origin feature/L-material-management

# Hæˆå‘˜ï¼ˆç”Ÿäº§ç®¡ç†ï¼‰
git checkout -b feature/H-production-management
git push -u origin feature/H-production-management

# Sæˆå‘˜ï¼ˆè½¦é—´ç®¡ç†ï¼‰
git checkout -b feature/S-workshop-management
git push -u origin feature/S-workshop-management
```

## ğŸ‘¨â€ğŸ’» å„æˆå‘˜å¼€å‘æŒ‡å¯¼

### ğŸ”¥ Læˆå‘˜ - ç«‹å³å¯å¼€å§‹ï¼

**ä½ çš„DALå±‚å·²å®Œå…¨å°±ç»ªï¼Œå¯ä»¥ç›´æ¥å¼€å§‹BLLå±‚å¼€å‘ï¼**

#### å¯ç”¨çš„DALç±»
```csharp
// ç‰©æ–™ç®¡ç†
using MES.DAL.Material;
using MES.Models.Material;

var materialDAL = new MaterialDAL();
var materials = materialDAL.GetAll();                    // è·å–æ‰€æœ‰ç‰©æ–™
var material = materialDAL.GetByMaterialCode("M001");    // æ ¹æ®ç¼–ç æŸ¥è¯¢
var categoryMaterials = materialDAL.GetByCategory("åŸææ–™"); // æ ¹æ®ç±»åˆ«æŸ¥è¯¢

// BOMç®¡ç†
var bomDAL = new BOMDAL();
var boms = bomDAL.GetByProductId(1);                     // æ ¹æ®äº§å“IDè·å–BOM
var bom = bomDAL.GetByBOMCode("BOM001");                 // æ ¹æ®BOMç¼–ç æŸ¥è¯¢
```

#### å¼€å‘æ­¥éª¤
1. **åˆ›å»ºBLLå±‚ç±»**ï¼šåœ¨`src/MES.BLL/Material/`ç›®å½•ä¸‹åˆ›å»ºMaterialBLL.cså’ŒBOMBLL.cs
2. **åˆ›å»ºUIç•Œé¢**ï¼šåœ¨`src/MES.UI/Forms/Material/`ç›®å½•ä¸‹åˆ›å»ºç‰©æ–™ç®¡ç†çª—ä½“
3. **åŠŸèƒ½æµ‹è¯•**ï¼šç¡®ä¿å¢åˆ æ”¹æŸ¥åŠŸèƒ½æ­£å¸¸

### â³ Hæˆå‘˜ - éœ€å…ˆåˆ›å»ºæ¨¡å‹ç±»

#### ç¬¬1æ­¥ï¼šåˆ›å»ºProductionOrderInfoæ¨¡å‹

åœ¨`src/MES.Models/Production/`ç›®å½•ä¸‹åˆ›å»º`ProductionOrderInfo.cs`ï¼š

```csharp
using System;
using MES.Models.Base;

namespace MES.Models.Production
{
    public class ProductionOrderInfo : BaseModel
    {
        public string OrderNo { get; set; }           // è®¢å•ç¼–å·
        public int MaterialId { get; set; }          // ç‰©æ–™ID
        public decimal Quantity { get; set; }        // ç”Ÿäº§æ•°é‡
        public string Status { get; set; }           // è®¢å•çŠ¶æ€
        public DateTime PlanStartTime { get; set; }  // è®¡åˆ’å¼€å§‹æ—¶é—´
        public DateTime PlanEndTime { get; set; }    // è®¡åˆ’å®Œæˆæ—¶é—´
        public DateTime? ActualStartTime { get; set; } // å®é™…å¼€å§‹æ—¶é—´
        public DateTime? ActualEndTime { get; set; }   // å®é™…å®Œæˆæ—¶é—´
        public int Priority { get; set; }            // ä¼˜å…ˆçº§
        public string Remarks { get; set; }          // å¤‡æ³¨
        
        public ProductionOrderInfo()
        {
            Status = "å¾…å¼€å§‹";
            Priority = 1;
        }
    }
}
```

#### ç¬¬2æ­¥ï¼šæ›´æ–°é¡¹ç›®æ–‡ä»¶

åœ¨`src/MES.Models/MES.Models.csproj`ä¸­æ·»åŠ ï¼š
```xml
<Compile Include="Production\ProductionOrderInfo.cs" />
```

åœ¨`src/MES.DAL/MES.DAL.csproj`ä¸­å–æ¶ˆæ³¨é‡Šï¼š
```xml
<Compile Include="Production\ProductionOrderDAL.cs" />
```

#### ç¬¬3æ­¥ï¼šéªŒè¯ç¼–è¯‘

è¿è¡Œï¼š`dotnet build src/MES.DAL/MES.DAL.csproj`

### â³ Sæˆå‘˜ - éœ€å…ˆåˆ›å»ºæ¨¡å‹ç±»

#### ç¬¬1æ­¥ï¼šåˆ›å»ºWorkshopInfoæ¨¡å‹

åœ¨`src/MES.Models/Workshop/`ç›®å½•ä¸‹åˆ›å»º`WorkshopInfo.cs`ï¼š

```csharp
using System;
using MES.Models.Base;

namespace MES.Models.Workshop
{
    public class WorkshopInfo : BaseModel
    {
        public string WorkshopCode { get; set; }     // è½¦é—´ç¼–ç 
        public string WorkshopName { get; set; }     // è½¦é—´åç§°
        public string Department { get; set; }       // æ‰€å±éƒ¨é—¨
        public string Status { get; set; }           // è½¦é—´çŠ¶æ€
        public string Manager { get; set; }          // è½¦é—´è´Ÿè´£äºº
        public string Location { get; set; }         // è½¦é—´ä½ç½®
        public int Capacity { get; set; }            // äº§èƒ½ä¿¡æ¯
        public int EquipmentCount { get; set; }      // è®¾å¤‡æ•°é‡
        public int WorkerCount { get; set; }         // å·¥äººæ•°é‡
        public string Description { get; set; }      // æè¿°
        
        public WorkshopInfo()
        {
            Status = "æ­£å¸¸";
            Capacity = 0;
            EquipmentCount = 0;
            WorkerCount = 0;
        }
    }
}
```

#### ç¬¬2æ­¥ï¼šæ›´æ–°é¡¹ç›®æ–‡ä»¶

åœ¨`src/MES.Models/MES.Models.csproj`ä¸­æ·»åŠ ï¼š
```xml
<Compile Include="Workshop\WorkshopInfo.cs" />
```

åœ¨`src/MES.DAL/MES.DAL.csproj`ä¸­å–æ¶ˆæ³¨é‡Šï¼š
```xml
<Compile Include="Workshop\WorkshopDAL.cs" />
```

#### ç¬¬3æ­¥ï¼šéªŒè¯ç¼–è¯‘

è¿è¡Œï¼š`dotnet build src/MES.DAL/MES.DAL.csproj`

## ğŸ“ é¡¹ç›®ç»“æ„

```
MES-SON/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ MES.Common/     # å…¬å…±ç»„ä»¶ï¼ˆæ—¥å¿—ã€é…ç½®ç­‰ï¼‰
â”‚   â”œâ”€â”€ MES.Models/     # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ MES.DAL/        # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ MES.BLL/        # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â””â”€â”€ MES.UI/         # ç”¨æˆ·ç•Œé¢å±‚
â”œâ”€â”€ database/           # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ docs/              # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ README.md          # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ å¼€å‘è§„èŒƒ

### å‘½åçº¦å®š
- **ç±»åï¼š** PascalCaseï¼ˆå¦‚ï¼šMaterialBLLï¼‰
- **æ–¹æ³•åï¼š** PascalCaseï¼ˆå¦‚ï¼šGetAllMaterialsï¼‰
- **å˜é‡åï¼š** camelCaseï¼ˆå¦‚ï¼šmaterialListï¼‰
- **å¸¸é‡ï¼š** UPPER_CASEï¼ˆå¦‚ï¼šMAX_RETRY_COUNTï¼‰

### å¼‚å¸¸å¤„ç†
```csharp
try
{
    // ä¸šåŠ¡é€»è¾‘
}
catch (Exception ex)
{
    LogManager.Error("æ“ä½œæè¿°", ex);
    throw new MESException("ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯", ex);
}
```

### æ—¥å¿—è®°å½•
```csharp
LogManager.Info("æ“ä½œæˆåŠŸä¿¡æ¯");
LogManager.Warning("è­¦å‘Šä¿¡æ¯");
LogManager.Error("é”™è¯¯ä¿¡æ¯", exception);
```

## ğŸ“ æ—¥å¸¸å¼€å‘æµç¨‹

### ğŸŒ… æ¯æ—¥å¼€å§‹å·¥ä½œ
```bash
# 1. åˆ‡æ¢åˆ°ä½ çš„åŠŸèƒ½åˆ†æ”¯
git checkout feature/ä½ çš„åˆ†æ”¯å

# 2. æ‹‰å–æœ€æ–°æ›´æ”¹
git pull origin feature/ä½ çš„åˆ†æ”¯å

# 3. åŒæ­¥developåˆ†æ”¯çš„æ›´æ–°
git fetch origin
git merge origin/develop

# 4. å¼€å§‹ç¼–ç ...
```

### ğŸŒ† æ¯æ—¥ç»“æŸå·¥ä½œ
```bash
# 1. æ·»åŠ æ‰€æœ‰æ›´æ”¹
git add .

# 2. æäº¤æ›´æ”¹
git commit -m "ä½ çš„æˆå‘˜æ ‡è¯†: æ¨¡å— - ä»Šå¤©å®Œæˆçš„åŠŸèƒ½"

# 3. æ¨é€åˆ°è¿œç¨‹
git push origin feature/ä½ çš„åˆ†æ”¯å
```

### ğŸ“‹ æäº¤æ¶ˆæ¯ç¤ºä¾‹
```
L: ç‰©æ–™ç®¡ç† - å®Œæˆç‰©æ–™ä¿¡æ¯å¢åˆ æ”¹æŸ¥åŠŸèƒ½
H: ç”Ÿäº§ç®¡ç† - å®ç°ç”Ÿäº§è®¢å•åˆ›å»ºç•Œé¢
S: è½¦é—´ç®¡ç† - æ·»åŠ è®¾å¤‡çŠ¶æ€ç›‘æ§ç»„ä»¶
```

## ğŸ–¥ï¸ ç•Œé¢å¼€å‘æŒ‡å—

### ğŸ¨ è®¾è®¡å™¨ä½¿ç”¨
1. **æ‰“å¼€MainForm.cs[è®¾è®¡]** - å¯ä»¥çœ‹åˆ°å®Œæ•´å¸ƒå±€
2. **åœ¨panelMainä¸­è®¾è®¡** - ä¸»å·¥ä½œåŒºåŸŸ
3. **æˆ–åˆ›å»ºæ–°çª—ä½“** - ç‹¬ç«‹çš„åŠŸèƒ½çª—ä½“
4. **ä½¿ç”¨treeViewModules** - å·¦ä¾§å¯¼èˆªæ ‘

### ğŸ¯ ç•Œé¢è§„èŒƒ
- **å­—ä½“ï¼š** å¾®è½¯é›…é»‘
- **ä¸»è‰²è°ƒï¼š** è“è‰²ç³» (#337ab7)
- **æˆåŠŸè‰²ï¼š** ç»¿è‰² (#5cb85c)
- **è­¦å‘Šè‰²ï¼š** æ©™è‰² (#f0ad4e)
- **é”™è¯¯è‰²ï¼š** çº¢è‰² (#d9534f)

## ğŸ†˜ è·å–å¸®åŠ©

### ğŸ” è‡ªåŠ©è§£å†³
1. **æŸ¥çœ‹é”™è¯¯æ—¥å¿—** - `Logs/` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶
2. **æ£€æŸ¥ç¼–è¯‘é”™è¯¯** - Visual Studioé”™è¯¯åˆ—è¡¨
3. **æŸ¥é˜…é¡¹ç›®æ–‡æ¡£** - `docs/` ç›®å½•ä¸‹çš„æ–‡æ¡£

### ğŸ’¬ å¯»æ±‚å¸®åŠ©
1. **GitHub Issues** - åˆ›å»ºé—®é¢˜æŠ¥å‘Š
2. **å›¢é˜Ÿç¾¤èŠ** - åŠæ—¶æ²Ÿé€š
3. **æ‰¾å¤©å¸** - æŠ€æœ¯éš¾é¢˜å’Œæ¶æ„é—®é¢˜

## ğŸ“š é‡è¦æ–‡æ¡£

- **é¡¹ç›®æ€»è§ˆï¼š** `docs/é¡¹ç›®æ€»è§ˆ.md`
- **Gitå·¥ä½œæµç¨‹ï¼š** `docs/Gitå·¥ä½œæµç¨‹.md`
- **DALå±‚è¯¦ç»†è¯´æ˜ï¼š** `src/MES.DAL/README.md`

---

**å¼€å§‹ç¼–ç ï¼Œåˆ›é€ å“è¶Šçš„MESç³»ç»Ÿï¼** ğŸš€
