# MES项目三人同步开发详细指导

> **更新时间：2025-06-05 14:30**  
> **重要时间节点：天帝开发时间至6月12日**  
> **策略：完全同步，无等待，三人并行开发**

## 🎯 总体目标

**第一阶段（6月5日-6月8日）：** 三人完全并行，各自完成核心模块  
**第二阶段（6月9日-6月12日）：** UI开发和系统集成

## 👥 三人详细任务分配

### 🔥 L成员（物料管理UI开发）

#### **技术基础**
- ✅ MaterialBLL和BOMBLL已完成
- ✅ MaterialDAL和BOMDAL已就绪
- ✅ MaterialInfo和BOMInfo模型已完成

#### **Day 1-2（6月5日-6月6日）：界面框架搭建**

**具体文件创建：**
```
src/MES.UI/Forms/Material/
├── MaterialManagementForm.cs          # 物料管理主界面
├── MaterialManagementForm.Designer.cs # 设计器文件
├── MaterialManagementForm.resx        # 资源文件
├── MaterialEditDialog.cs              # 物料编辑对话框
├── MaterialEditDialog.Designer.cs     # 设计器文件
├── MaterialEditDialog.resx            # 资源文件
├── BOMManagementForm.cs               # BOM管理界面
├── BOMManagementForm.Designer.cs      # 设计器文件
└── BOMManagementForm.resx             # 资源文件
```

**界面设计要求：**
1. **MaterialManagementForm主界面**
   - 顶部：工具栏（新增、修改、删除、刷新、搜索）
   - 中部：DataGridView显示物料列表
   - 底部：状态栏显示记录数量
   - 右侧：搜索面板（按编码、名称、类型筛选）

2. **MaterialEditDialog编辑对话框**
   - 物料编码（必填，唯一性验证）
   - 物料名称（必填）
   - 物料类型（下拉选择）
   - 规格型号、单位、最小库存、最大库存
   - 确定、取消按钮

**技术实现要点：**
```csharp
// 参考代码结构
public partial class MaterialManagementForm : Form
{
    private MaterialBLL materialBLL;
    private BindingSource bindingSource;
    
    public MaterialManagementForm()
    {
        InitializeComponent();
        materialBLL = new MaterialBLL();
        bindingSource = new BindingSource();
        InitializeDataGridView();
        LoadMaterialData();
    }
    
    private void InitializeDataGridView()
    {
        // 配置DataGridView列
        // 设置数据绑定
    }
    
    private void LoadMaterialData()
    {
        // 调用MaterialBLL获取数据
        // 绑定到DataGridView
    }
}
```

#### **Day 3-4（6月7日-6月8日）：业务逻辑集成**

**功能实现清单：**
- [ ] 物料信息的增删改查操作
- [ ] 数据验证和异常处理
- [ ] BOM管理界面集成
- [ ] 搜索和筛选功能
- [ ] 操作确认对话框
- [ ] 错误提示和用户反馈

**提交节点：** 完整的物料管理UI模块

### ⚡ H成员（生产管理模型+DAL+BLL）

#### **Day 1（6月5日）：模型类创建**

**创建目录结构：**
```
src/MES.Models/Production/
├── ProductionOrderInfo.cs    # 生产订单模型
├── ProductionPlanInfo.cs     # 生产计划模型
└── ProductionTaskInfo.cs     # 生产任务模型
```

**ProductionOrderInfo.cs 详细结构：**
```csharp
using MES.Models.Base;
using System;

namespace MES.Models.Production
{
    /// <summary>
    /// 生产订单信息模型
    /// </summary>
    public class ProductionOrderInfo : BaseModel
    {
        /// <summary>
        /// 订单编号（唯一）
        /// </summary>
        public string OrderCode { get; set; }
        
        /// <summary>
        /// 产品编号
        /// </summary>
        public string ProductCode { get; set; }
        
        /// <summary>
        /// 产品名称
        /// </summary>
        public string ProductName { get; set; }
        
        /// <summary>
        /// 计划数量
        /// </summary>
        public int PlanQuantity { get; set; }
        
        /// <summary>
        /// 已完成数量
        /// </summary>
        public int CompletedQuantity { get; set; }
        
        /// <summary>
        /// 计划开始时间
        /// </summary>
        public DateTime PlanStartTime { get; set; }
        
        /// <summary>
        /// 计划完成时间
        /// </summary>
        public DateTime PlanEndTime { get; set; }
        
        /// <summary>
        /// 实际开始时间
        /// </summary>
        public DateTime? ActualStartTime { get; set; }
        
        /// <summary>
        /// 实际完成时间
        /// </summary>
        public DateTime? ActualEndTime { get; set; }
        
        /// <summary>
        /// 订单状态（0-待开始，1-进行中，2-已完成，3-已取消）
        /// </summary>
        public int Status { get; set; }
        
        /// <summary>
        /// 优先级（1-低，2-中，3-高，4-紧急）
        /// </summary>
        public int Priority { get; set; }
        
        /// <summary>
        /// 备注
        /// </summary>
        public string Remark { get; set; }
    }
}
```

#### **Day 2（6月6日）：DAL层开发**

**启用并完善：** `src/MES.DAL/Production/ProductionOrderDAL.cs`

**关键方法实现：**
```csharp
/// <summary>
/// 根据状态查询生产订单
/// </summary>
public List<ProductionOrderInfo> GetByStatus(int status)
{
    // 实现按状态查询
}

/// <summary>
/// 根据日期范围查询生产订单
/// </summary>
public List<ProductionOrderInfo> GetByDateRange(DateTime startDate, DateTime endDate)
{
    // 实现按日期范围查询
}

/// <summary>
/// 更新订单状态
/// </summary>
public bool UpdateStatus(int orderId, int status)
{
    // 实现状态更新
}
```

#### **Day 3-4（6月7日-6月8日）：BLL层开发**

**创建文件：**
```
src/MES.BLL/Production/
├── IProductionOrderBLL.cs    # 接口定义
└── ProductionOrderBLL.cs     # 实现类
```

**业务逻辑要点：**
- 订单编号自动生成规则
- 状态变更验证逻辑
- 数量验证（完成数量不能超过计划数量）
- 时间验证（开始时间不能晚于结束时间）

### 🚀 S成员（车间管理模型+DAL+BLL）

#### **Day 1（6月5日）：模型类创建**

**创建目录结构：**
```
src/MES.Models/Workshop/
├── WorkshopInfo.cs      # 车间信息模型
├── WIPInfo.cs          # 在制品模型
└── EquipmentInfo.cs    # 设备信息模型
```

**WorkshopInfo.cs 详细结构：**
```csharp
using MES.Models.Base;

namespace MES.Models.Workshop
{
    /// <summary>
    /// 车间信息模型
    /// </summary>
    public class WorkshopInfo : BaseModel
    {
        /// <summary>
        /// 车间编号
        /// </summary>
        public string WorkshopCode { get; set; }
        
        /// <summary>
        /// 车间名称
        /// </summary>
        public string WorkshopName { get; set; }
        
        /// <summary>
        /// 车间负责人
        /// </summary>
        public string Manager { get; set; }
        
        /// <summary>
        /// 联系电话
        /// </summary>
        public string Phone { get; set; }
        
        /// <summary>
        /// 车间位置
        /// </summary>
        public string Location { get; set; }
        
        /// <summary>
        /// 设备数量
        /// </summary>
        public int EquipmentCount { get; set; }
        
        /// <summary>
        /// 员工数量
        /// </summary>
        public int EmployeeCount { get; set; }
        
        /// <summary>
        /// 车间状态（0-停用，1-启用）
        /// </summary>
        public int Status { get; set; }
        
        /// <summary>
        /// 备注
        /// </summary>
        public string Remark { get; set; }
    }
}
```

#### **Day 2（6月6日）：DAL层开发**

**启用文件：**
- `src/MES.DAL/Workshop/WorkshopDAL.cs`
- `src/MES.DAL/Workshop/WIPDAL.cs`
- `src/MES.DAL/Workshop/EquipmentDAL.cs`

#### **Day 3-4（6月7日-6月8日）：BLL层开发**

**创建文件：**
```
src/MES.BLL/Workshop/
├── IWorkshopBLL.cs     # 车间业务接口
├── WorkshopBLL.cs      # 车间业务实现
├── IWIPBLL.cs          # 在制品业务接口
├── WIPBLL.cs           # 在制品业务实现
├── IEquipmentBLL.cs    # 设备业务接口
└── EquipmentBLL.cs     # 设备业务实现
```

## 📋 每日提交检查清单

### 每日必须完成
- [ ] 代码提交到个人分支
- [ ] 提交消息规范：`成员标识: 模块 - 具体功能描述`
- [ ] 确保代码可编译
- [ ] 更新个人进度到项目总览

### 每日同步时间
- **17:00** - 提交当日代码
- **17:30** - 天帝代码审查
- **18:00** - 团队同步会议

## 🛠️ 技术支持资源

### 参考模板
- **模型类：** `src/MES.Models/Material/MaterialInfo.cs`
- **DAL层：** `src/MES.DAL/Material/MaterialDAL.cs`
- **BLL层：** `src/MES.BLL/Material/MaterialBLL.cs`

### 开发规范
- 继承对应基类
- 统一异常处理
- 完整XML注释
- 参数化查询

### 遇到问题时
1. 查看参考模板
2. 查阅开发指南
3. 向天帝求助
4. 团队讨论解决
