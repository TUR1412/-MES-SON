# MES (制造执行系统) 项目

## 1. 项目概述

本项目旨在开发一套功能完善的制造执行系统 (MES)，以实现生产过程的数字化管理，提高生产效率和产品质量。系统将采用经典的三层架构（UI 层、业务逻辑层 BLL、数据访问层 DAL）进行设计与开发。

* **UI 层**: Windows Forms (WinForms)
* **业务逻辑层 (BLL)**: C# 类库
* **数据访问层 (DAL)**: C# 类库，通过 ADO.NET 或轻量级 ORM 与数据库交互
* **数据库**: MySQL 8.0

## 2. 技术栈

* **开发语言**: C# (.NET Framework)
* **开发工具**: Visual Studio 2022
* **数据库**: MySQL 8.0
* **版本控制**: Git, GitHub

## 3. 环境搭建与启动 (简要)

* 安装 Visual Studio 2022 (确保包含 .NET桌面开发 工作负载)。
* 安装 MySQL 8.0 数据库，并根据 `docs/database_schema.sql` (假设有此文件) 创建数据库和表。
* 配置应用程序连接字符串。
* 克隆本仓库代码到本地。
* 使用 Visual Studio 2022 打开解决方案文件 (`.sln`)。
* 编译并运行主启动项目。

---

## 4. GitHub 协同作战手册 (VS2022 版 - MES 项目专用)

兄弟们，听好了！咱们现在搞 MES 这个项目，代码放 GitHub 上。为了不乱套，都按下面这个路子来，保准清清楚楚，明明白白。

### 一、几个基本词儿，先整明白

1.  **仓库 (Repository)**：简单说，就是咱们在 GitHub 上开的那个“项目总文件夹”，所有代码都扔这儿。大家从这拿代码，也往这交代码。
2.  **`main` 分支 (或者叫 `master`，咱们也可以统一用 `develop` 分支)**：这玩意儿是咱们项目的“正式版”代码，是最稳的，轻易不能动。**记住，平时谁都别直接往这上面提交代码，听见没！** (我们项目约定使用 `develop` 作为主开发分支，`main` 作为稳定发布分支)。
3.  **特性分支 (Feature Branch)**：这个是重点！每个人干活前，比如 L 你搞物料，H 你搞工单，S 你搞在制品，都从 `develop` 上拉最新的代码下来，然后自己开个“小灶”，这就是你的分支。
    * 比如 L，你就开个 `L-wuliao` 这样的分支。
    * H，你就开个 `H-gongdan` 这样的分支。
    * S，你就开个 `S-zaizhipin` 这样的分支。
    * **你们就在自己这个“小灶”上写代码、改代码、测代码。** 你改的东西，只影响你自己的分支，碍不着别人，也碍不着 `develop` 分支。

### 二、VS2022 里怎么搞（按步操作）

VS2022 用 Git 挺方便的，点点鼠标就行。

**前提：项目组长已经在 GitHub 上把仓库建好了，`develop` 和 `main` 分支也初始化了。**

**你们三个（L、H、S）按下面的步骤来：**

1.  **把代码拖到你电脑上 (第一次才用)**：
    * 打开 VS2022，选那个“克隆存储库”。
    * 把 GitHub 仓库的地址 (`[请在此处填写你们的 GitHub 仓库链接]`) 输进去。
    * VS2022 就把项目代码整个给你扒拉下来了。

2.  **每次接新活儿前，先拉最新代码，再开自己的“小灶” (分支)**：
    * 打开 VS2022 右下角那个“Git 更改”窗口。
    * **先蹦到 `develop` 分支**：在分支列表里选它。
    * **点“拉取 (Pull)”**：把服务器上 `develop` 分支最新的代码同步到你电脑上。这步贼重要，保证你干活的底子是最新的。
    * **开“小灶” (新建分支)**：还在“Git 更改”窗口，点现在分支名旁边的小箭头，选“新建本地分支”。
        * 给你的分支起个好认的名字，比如 `L-wuliao-bomGuanli`。
        * 看清楚“基于”那个选项是不是你刚更新完的 `develop` 分支。
        * 把“签出分支”(Checkout branch)勾上，VS 就自动跳到你的新分支了。

3.  **在你的“小灶”上使劲写代码**：
    * 现在你就在自己的分支 (比如 `L-wuliao-bomGuanli`) 上干活了。
    * 你改的、新建的所有东西，都在你这个分支里头。
    * **代码改一段，测一下没问题，就赶紧“提交 (Commit)”**：
        * 在“Git 更改”窗口，写明白你这次改了啥（比如“搞定了BOM新增的前端页面”），然后点“全部提交”。
        * 这些提交是你自己分支上的小存档，还没传到服务器。
        * **提交信息规范**: 尽量遵循 `称号: 模块 - 具体操作描述` (例如: `L: 物料模块 - 完成BOM编辑功能`)。

4.  **把你的“小灶”推到 GitHub (让大家瞅瞅你干了多少，也算备份)**：
    * 你觉得一个功能点搞完了，或者一天活儿干完了，就把你的分支推到 GitHub 上。
    * 在“Git 更改”窗口，点“推送”按钮。
    * 要是第一次推这个新分支，VS2022 可能会问你要不要发布分支，点“是”就行。

5.  **活儿干完了，准备往“正式版”里合 (关键：Pull Request，简称 PR)**：
    * 你的模块功能写完了，在自己分支上测溜了。
    * **再拉一次 `develop` 的最新代码，跟你自己的分支合一下 (非常重要！能少很多麻烦冲突)**：
        * 先把你当前分支所有改动都提交、推送了。
        * 跳回 `develop` 分支，点“拉取”。
        * 再跳回你自己的特性分支 (比如 `L-wuliao-bomGuanli`)。
        * 在“Git 更改”窗口，找“分支” -> “将 develop 合并到 L-wuliao-bomGuanli”。这一步是把主分支上别人可能已经合进去的新代码，先弄到你自己的分支上。如果这里有冲突，就在你自己分支上先摆平。
    * **发起“合并申请” (Pull Request / PR)**：
        * 打开 GitHub 仓库的网页。
        * GitHub 一般会自动发现你推了新分支，会提示你建一个 Pull Request。
        * 或者你手动找到你的分支，点“New pull request”。
        * **目标分支选 `develop`**，源分支选你自己的特性分支。
        * 写清楚你这个 PR 是干啥的，改了哪些东西，怎么测试。
        * 然后@项目组长或其他指定的审查人员。

6.  **代码审查与合并**：
    * 项目组长或其他负责人会审查代码，可能会提出修改意见。
    * 要是让你改，你就在你的分支上继续改、提交、推送。那个 PR 会自动跟着更新。
    * 审查通过后，项目组长或指定管理员会在 GitHub 上点击“Merge pull request”按钮，代码将正式进入 `develop` 分支。
    * **齐活儿！你的代码成开发主干的一部分了！**

7.  **打扫战场 (可选)**：
    * 合并完了，你的那个特性分支就可以删了 (先删服务器上的，再删你电脑上的)。

### 三、代码冲突了咋办？（肯定会碰到，别慌）

* **啥是冲突？** 你俩改了同一个文件的同一个地方，Git 就蒙圈了，不知道该听谁的。
* **啥时候会碰到？**
    * 你拉最新代码 (`git pull`) 的时候。
    * 你把 `develop` 分支往你自己分支上合的时候 (上面第5步那个同步操作)。
    * 项目组长合并 PR 的时候 (要是你的分支跟 `develop` 分支有冲突，而且你之前没同步)。
* **咋解决？**
    * VS2022 会告诉你哪儿冲突了，把冲突文件标出来。
    * 打开冲突文件，你会瞅见类似这样的玩意儿：
        ```
        <<<<<<< HEAD (你电脑上的修改)
        你写的代码
        =======
        别人写的代码 (服务器上的或者其他分支的)
        >>>>>>> some_other_branch_name
        ```
    * 你得自己看，决定留下谁的代码，或者怎么把两边的代码揉一起，然后把这些特殊标记 (`<<<<<<<`, `=======`, `>>>>>>>`) 删了。
    * 所有冲突都解决了，保存文件。
    * 在“Git 更改”窗口，把解决冲突后的文件“暂存 (Stage)”，然后“提交”。
    * **拿不准咋办？立刻问项目组长或有经验的团队成员！别瞎整！**

### 四、代码有先后顺序（依赖问题）

* **比如**：S 的“在制品管理”模块，要用 L“物料管理”模块里的某个功能。
* **咋办？**
    1.  **吼一声！** S 你得跟 L 说清楚，你需要他那边的啥东西。
    2.  **L 先搞定**：L 把他那部分被依赖的功能先写完，通过 PR 合并到 `develop` 分支。
    3.  **S 再更新**：等 L 的代码合进去了，S 你再开始做依赖功能前，或者在提交自己代码前，**务必从 `develop` 分支拉最新的代码**，跟你自己的特性分支合一下。这样你的分支里就有 L 做好的东西了。
    4.  **要是依赖关系太绕**：咱们可以商量着把一个大任务拆成几个小块，一块一块合。

### 给每个人的简要步骤总结：

1.  **接活儿前**：蹦到 `develop` -> 点“拉取 (Pull)” -> 开自己的新“小灶” (特性分支)。
2.  **干活儿时**：在自己“小灶”上写代码 -> 经常“提交 (Commit)” -> 隔三差五“推送 (Push)”到 GitHub。
3.  **干完活儿**：(先拉 `develop` 的代码到自己分支上合一下，看看有没有冲突) -> “推送 (Push)” -> 去 GitHub 创建 Pull Request 到 `develop` -> @项目组长审查。
4.  **有冲突**：别慌，看提示，手动解决，再提交。搞不定就求助项目组长或团队成员。

行了，兄弟们，这个版本够直接了吧？关键就是 **“各干各的（分支），干完申请合并（PR），大家瞅瞅再通过”**。咱们团队多练几次，指定没问题！

---

## 5. 团队成员与模块分工 (参考)

| 称号     | 核心职责与负责模块 (详情参考项目分工文档)                                                                                                       |
| :------- | :----------------------------------------------------------------------------------------------------------------------------------------------- |
| **天帝 (组长)** | 系统架构与框架；版本控制管理；代码审查；技术决策；接口协调；项目管理。                                                                             |
| **L 成员** | 物料与工艺规则配置模块。                                                                                                                          |
| **H 成员** | 生产订单、执行核心及用户权限模块。                                                                                                                |
| **S 成员** | 车间作业与辅助管理模块。                                                                                                                          |

*详细的项目任务分工请参考文档： `docs/PROJECT_TASK_DIVISION.md` (假设有此文件)*

---
本文档将随项目进展持续更新。
